// compile with CC_DEFS="-DCEU_PM_MIN"

#include "wclock.ceu"
#include "adc.ceu"

#define CHANNEL _A0

output on/off PIN_13;

emit ADC(on);
loop do
    await 1s;
    emit ADC_REQUEST(CHANNEL);
    await ADC_DONE;
    var int value = adc_channels[CHANNEL-_A0].value;
    if value > 500 then
        emit PIN_13(on);
    else
        emit PIN_13(off);
    end
end
